\chapter{Platinenaufbau}
\label{sec:Platinenaufbau}
\pagestyle{scrheadings}

\section{Vorüberlegungen}
Um Sicherzustellen, das alle Antennen gleichmäßig in die sechs vorgegebenen Raumrichtungen abstrahlen, sollte bereits die Platine symmetrisch aufgebaut werden. Dazu wurden zuerst das Layout der sechs identischen Transceiver-Einheiten mit dem TDA5340 Baustein und den Antennen erstellt und anschließend gleichmäßig um die weiten für die Schaltung notwendigen notwendigen funktionellen Segmente angeordnet. 
\section{Layoutprogramm Altium Designer}
Bei dem Entwicklungswerkzeug \enquote{Altium Designer} des Entwicklers Altium Limited handelt es sich um ein System zum Entwurf von  gedruckten  Schaltungen oder \acp{PCB}. Ein solches Programm wird auch als \acp{EDA} oder ECAD für electronic \ac{CAD} bezeichnet, da es den Entwickler bei der Umsetzung der Anforderungen in einen Schaltplan unterstützen soll.
Wie viele andere \ac{EDA}-Programme ist auch Altium Designer so aufgebaut das sich der Entwickler zuerst mit dem allgemeinen symbolisierten Schaltplan befassen kann und erst zu einem späteren Zeitpunkt die tatsächliche Anordnung der Bauteile auf dem \ac{PCB}-Substrat festgelegt wird. Somit können zuerst im Schematic Editor die Funktionen der Schaltung umgesetzt werden. Dazu werden die verwendeten Bauteile aus zuvor angelegten Bibliotheken verwendet oder es werden bestehende Bibliotheken verwendete, die etwa vom Hersteller der Bauteile zur Verfügung gestellt werden. Altium selbst bietet hierfür auch diverse Möglichkeiten an und stellt Bauteile nach Hersteller und Art geordnet bereit.
In den Bibliotheken sind alle im weiteren Verlauf benötigten Informationen über die einzelnen Bauteile enthalten. So liegen dort etwa  entsprechenden Abbildungen für das Bauteil im  Schaltplan  vor. In den so genannten \enquote{Footprints} zu jedem Bauteil, welche ebenfalls in den Bibliotheken enthalten sind, wurde zuvor die, für das physikalische Gehäuse, notwendigen Abmessungen und Lötpads festgelegt. Da es Bauteile, wie den verwendeten  Mikrocontroller, in verschiedenen Gehäusen geben kann, besteht somit auch die Möglichkeit hier verschiedene Footprints zu wählen. Da viele Gehäuse herstellerübergreifend genormt sind, konnten teilweise bestehende Footprints genutzt werden oder diese mehrfach verwendet werden.

Altium Designer ist dabei in drei Teilbereiche unterteilt: im \enquote{Board Planning Mode}  liegt der Fokus auf dem Anordnen der einzelnen Bauteile und Komponenten auf der Leiterplatte, außerdem wird in diesem Bereich die Form und Ausmaße der Leiterplatte festgelegt. Im 2D-Modus des \ac{PCB}-Editor lassen sich anschließend die aus der Definition im Schaltplan ergebenden elektrischen Verbindungen örtlich auf den verschiedenen Kupferebenen (Layern) anordnen. Die Hauptarbeit findet also in diesem Teil des \ac{PCB}-Editors statt. Der 3D-Modus dient anschließend zur Evaluation des Designs und zur Anpassung an Gehäuse oder andere Komponenten.
%Ebenfalls...    Layers/ebene, top, bot, bestückungsdruck, solderresin
%lagenanzahl 
%lötpad
%platinenmaterial (zb bezüglich wärmemangement)s. Übung LEKFZ
%welche Bauteile in eigener Lib?
%verwendung SMD Bauteile

%Bauteileingabe und schaltplan
%MUlti channel - multi sheet
Wegen der Größte des Projekts wurde zur besseren Übersicht ein  so genanntes \enquote{Multi-Sheet-Design} erstellt. Dadurch war es möglich die verschiedenen funktionellen Blöcke der Basistation auf getrennte Blätter des Schaltplans zu verteilen. Der Mikrocontroller, die Spannungsversorung und der Transceiver sowie die für eine Netzwerkkommunikation notwendigen Bauteile  wurden dabei auf getrennten Seiten angeordnet und die elektrischen Verbindungen erstellt.
Da der Tranciever und die entsprechende Peripherie sechs mal genau identisch verwendet wurde und auch auf dem \ac{PCB}-Substrat mehrfach mit Leiterbahnen verbunden und angeordnet werden musste, wurde hierfür ein so gennantes \enquote{Multi-Channel}-Design gewählt. In Altium Designer können mit diesem Feature identische Schaltungsteile einmal angeordnet und mit Leiterbahnen verbunden werden und dieses Design auf alle anderen entsprechenden Schaltungsteile angewendet werden. Somit muss das aufwändige Anordnen der Bauteile und die Führung der Leiterbahnen nur bei einem der Kanäle durchgeführt werden.  Mit Hilfe eines übergeordneten Sheet-Symbols wurde der Schaltplan des Transceivers in den Schaltplan des Mikrocontroller eingefügt und diesem somit untergeordnet. Über Ports welche zum  Schaltplansymbol hinzugefügt werden, lassen sich elektrische Verbindungen zwischen Netzen innerhalb des Schaltplans für Transceiver  und Mikrocontroller erstellen. Dabei wird im Transceiver-Schaltplan ein Port und hinzugefügt, der mit elektrischen Netzen  verbunden werden kann. Auf dem Schaltplan-Symbol im Mikrocontroller-Schaltplan wird ein entsprechender gleichnamiger Port erstellt, der mit Netzen am Mikrocontroller verbunden werden kann. Da die drei Verbindungen der \ac{SPI}-Kommunikation jeweils aus einem Netz bestehen und etwa alle MISO-Leitungen an dem selben Pin des XMC4500 und den selben Anschluss bei allen TDAs angebunden sind konnte hierfür ein einfacher Port verwendet werden. Alle anderen Anschlüsse, wie etwa die Auswahlleitung für die \ac{SPI}-Verbindung, welche für jede der sechs verschiedenen Transceivereinheiten mit einen anderen Anschluss des Mikrocontroller verbunden sein mussten mussten deswegen mit dem Repeat-Kommando erstellt werden. So wird im untergeordneten Schaltplan, in diesem Fall dem des TDA, der Port beliebig benannt, etwa als \enquote{NCS}. Der auf dem Schaltplansymbol erstellte Port wird dagegen in \enquote{Repeat(NCS)} umbenannt. Globale Netze wie die Versorgungsspannung von 3,3 Volt oder die Masse müssen dabei nicht als Port hinzugefügt werden. Altium Designer stellt deren Verbindungen automatisch her. Wird nun noch der Name des Schaltplansymbols nach dem folgenden Muster angepasst, wird Altium Designer beim Kompilieren des Projektes ein Multi-Channel-Design erstellen, die Kanäle wie angegeben durchnummerieren und den Kanal im \ac{PCB}-Editor entsprechend mehrfach erstellen. Dazu sollte der Name die Struktur \enquote{Repeat(<Name>,<Startnummer> ,<Endnummer>)} aufweißen. Anschließend kann die Anordnung und das Routing des ersten Kanals erfolgen. Da für jeden Kanal ein eigener so genannter \enquote{Room} erstellt wird, lassen sich, nach dem erstellen der Leiterbahnen des ersten Kanals, die Anordnungen der Bauteile und Leiterbahnen mit dem \enquote{Copy Room Format}-Befehl auf alle anderen Kanäle erweitern. Ein Room bezeichnet dabei eine Gruppe an Elementen und einen Bereich in dem diese angeordnet sind und erlaubt das Anordnen aller enthaltenden Elemente auf der Platine.  %room erklären


%DRC
Altium Designer nummeriert automatische die verwendeten  Bauelemente  durch um eine genaue Identifikation eine Bauteiles zu erlauben und erstellt automatische einen Aufdruck neben dem Lötpäd mit dem Bauteilnamen in der entsprechenden Ebene. Ein solcher Bestückungsdruck zur leichteren Anordnung der Bauteile auf der fertig entwickelten Platine wurde nur auf der Hauptplatine erstellt. Auf den Teilplatinen für die Transceiver wurde dieser aus Platzgründen weggelassen.
Um sicherzustellen, das die sich aus der Bauteilanordnung ergebenden Pads und die Leiterbahnen auch fertigbar sind stellt Altium Designer zwei \acp{DRC}  bereit. Im ersten Live-\ac{DRC} werden \enquote{Violations} also Bauteile mit Verstößen durch ein farbiges Overlay markiert. Im folgenden kompletten Test zeigt Altium alle weiteren Verstöße an. Als Verstoß gelten etwa Leiterbahnen unterschiedlicher Netze die sich berühren und zu einem Kurzschluss führen würden oder auch  Verletzungen der festgelegten Abstandsregeln (Clearance). Alle Regeln für Violations können im \enquote{PCB Rules Editor} eingestellt werden und so an die Möglichkeiten des \ac{PCB}-Herstellers angepasst werden. Da die Leiterplatte für die Basisstation von Multi Circuit Boards Ltd. hergestellt wurde, konnten die auf der Webseite dieses Herstellers angegebenen Designregeln für den \ac{DRC} übernommen werden.
Da Altium im \ac{DRC} sich überschneidende und falsch verbundene Leiterbahnen angezeigt werden, muss kein extra \enquote{Layout vs. Schematic}-Test durchgeführt werden, da durch den \ac{DRC} Unterschiede zwischen Schaltplan und dem \ac{PCB}-Layout bereits angezeigt würden.

\section{verwendete Hardware}

\subsection{TDA5340}
Der verwendete Transceiver TDA5340 wird von Infineon Technologies AG  entwickelt und vertrieben. Er ist teil der SmartLEWIS\textsuperscript{TM} Produktfamilie die  energiesparende Lösungen für Funkanwengungen im Frequenzspektrum unterhalb von einem Gigaherz bietet. 
Der Transceiver kommuniziert mit seinem Host über das \ac{SPI}-Protokoll, der Mikrocontroller ist in diesem Fall sternförmig mit den einzelnen TDA-Bausteinen verbunden, die als Slaves fungieren. Die Daten werden auf drei gemeinsamen Leitungen übertragen, eine vierte Leitung dient dem XMC zur Auswahl des gewünschten Slaves für die Kommunikation. Diese \enquote{not Chip select}-Leitung (NCS) arbeitet active-low, sodass der jeweilige TDA5340 eine Interaktion akzeptier sobald diese vom XMC-Baustein auf Erdpotential gezogen wird.Von dein drei eigentlichen Datenleitungen fungiert eine als reiner Ausgang des Masters bzw. Dateneingang des TDA (MOSI), eine zweite als Eingang des Masters (MISO) und die dritte als ein vom XMC getriebenes Clock-Signal. Bei dem auf MISO und MOSI anliegenden Signal handelt es sich um ein unipolar kodiertes non-return-to-zero Signal, welches einer logischen $0$ bei Erdpotential entspricht. Der TDA unterstützt acht verschiedene Instruktionen, die es erlauben entweder einzelne Register des Bausteins zu lesen bzw. zu schreiben, auf mehrere hintereinander folgende Register  oder auf die beiden Puffer des Bausteins zuzugreifen. In den beiden Puffern, die als \ac{FIFO}-Strukturen  aufgebaut sind, werden die vom TDA erkannten und demodulierten bzw. die auf Übertragung wartenden Signalpakete zwischengespeichert. Diese Zwischenspeicherung soll den Mikrocontroller entlasten, so können entsprechende Datenpakete dem TDA5340 mitgeteilt werden und dieser übernimmt selbsttätig eine korrekte Modulation und Übertragung mit den eingestellten Parametern. 

Der TDA5340 kann sowohl mit einer Spannungsversorgungsspannung von $5V$ als auch bei $3,3V$ arbeiten. Da aber der XMC nur bei letzterer betrieben werden kann, wurde der TDA-Baustein und die externe Beschaltung einfachheitshalber auch auf  $3,3V$ ausgelegt. 
%interruptregister
%Package -transparent modes of tda (Des weiteren erlaubt der Baustein noc )
%TODO:Anpassnetzwerk
%IF Filter 
%SMA
%zweiseitige platine, Top und Botom, zwei kupferflächen


Um zu einem späterem Zeitpunkt eine größere Entfernung zwischen den einzelnen Antennen, und somit auch den jeweiligen Transceivern zu erlauben, wurde eine Sollbruchstelle vorgesehen. Dadurch könnten die gesamte Baugruppe von der Mutterplatine entfernt werden, was unter Umständen notwendig gewesen wäre um größere Unterschiede in der Signalstärke an den einzelnen Transceivern zu erhalten, und somit eine bessere Auflösung in der Ortung zu erlauben. Dazu wurden Anschlussleisten im Rastermaß $2,54mm$ an beiden Seiten der Sollbruchstelle vorgesehen. Die Verbindung der Transceiver-Einheiten mit der Hauptplatine wurde über diese Sollbruchstelle mit Leiterbahnen gewähleistet. Nach dem Abtrennen der TDA-Teilplatine, an der durch Bohrungen vorgesehenen Bruchstelle, wäre die elektrische Verbindung durch Kabel sichergestellt worden. Da es sich bei den zu übertragenden ausschließlich um digitale Signale handelt hätte dies unproblematisch mit ungeschirmten Flachbandkabeln ermöglicht werden können. Ein solches Vergrößern des Abstandes der Antennen war jedoch nicht notwendig. Neben der Versorgungsspannung, Masse und den vier für die \ac{SPI}-Kommunikation notwendigen Signalen wurden noch die drei multifunktionalen Digitalausgänge und der power-on reset-Pin dem XMC4500 über die Buchsenleisten zur Verfügung gestellt.


 
Die Antenne wurde am oberen Ende jeder TDA5340-Teilplatine vorgesehen. Als Anschluss für die Antenne wurde hier eine Koaxialbuchse in \ac{SMA}-Ausführung verwendet, welche auf $50\Omega$ angepasst ist. Durch den Koaxialsteckverbinder konnte sichergestellt werden, das alle notwendigen Frequenzen auch korrekt und ungedämpft passieren können. 
Das Anpassnetzwerk zwischen dem  integrierten Transceiver und der verwendeten SMA-Buchse diente der Leistungsanpassung zwischen den Pins des TDA5340 und der $50\Omega$-Koaxialbuchse. Der Aufbau des Anpassnetzwerkes basiert auf einem von Stefan Erhard erstellten Schaltplan für eine Aufsteckplatine für das Evaluationsboard \enquote{XMC 2Go} von Infineon. Durch die Verwendung von hoch abgestimmten Spulen und Kondensatoren mit Toleranzen von nur ±0,05pF bei einem Nennwert von 2,5pF wurde die korrekte Anpassung sichergestellt. 
 
Zur Verbesserung der Hochfrequenzeigenschaften wurden die nach dem Freiräume zwischen den Leiterbahnen mit einer Kupferfläche gefüllt, die mit dem Masseanschluss kontaktiert war. Durch die Verwendung von Vias, vor allem im Bereich des Anpassnetzwerkes, sollte eine niederohmige Verbindung zwischen den beiden Masseflächen auf der Ober- bzw. Unterseite der Platine erreicht werden. Daneben dienten diese, auf Nullpotential liegenden Vias, jedoch vor allem der Abschirmung der Pfade für die HF-Signale gegen mögliche Einkoppelungen aus der Umgebung, welche ankommende Funksignale stören könnten.

Obwohl der TDA5340 einen eingebauten Zwischenfrequenz-Filter hat, der über eine umschaltbare Bandweite verfügt, wurde ein externer Keramikfilter verwendet. Der TDA stellt dafür zwei Pins bereit, zwischen denen ein solcher Filter mit einer Frequenz von  $10,7$ MHz angeschlossen werden kann. Ohne einen hier extern angeschlossenen Filter würde der TDA als einfacher heterodyner Mischer direkt auf die Zwischenfrequenz $274$ kHz heruntermischen. Bei Verwendung eines externen Keramik oder auch eines LC $\pi$-Filters kann das ankommende HF-Signal jedoch in zwei Stufen gefiltert werden, ehe es in das Basisband demoduliert wird, was zu einer höheren Signalqualität führt%\cite{TDA-DataSheet}\cite{TDA-UserManual}.

Die elektrischen Verbindungen zwischen den beiden Eingängen des Low Noise Amplifier und dem Anpassnetzwerk wurden mit dem \enquote{Differential Pair Routing}-Feature von Altium Designer erstellt. Durch ein im Schaltplan auf die postitive und die negative elektrischen Verbindung zwischen dem TDA5340 und dem Anpassnetzwerk wird das Leitungspaar als differentiell markiert. Anschließend kann mit dem interatkiven \enquote{Diffential Pair Routing} einer der beiden Leitungen begonnen werden. Altium Designer wird dabei selbstständig versuchen die zweite Leiterbahn des Paares so anzuordnen, das die beiden Leiterbahnen symmetrisch und parallel zueinandern liegen. %hier TI zitieren
Durch die Verwendung des \enquote{Diffential Pair Routing} versucht Altium Designer auch die Länge der beiden Verbindungen anzugleichen. Durch die Anpassungen der differentielle Leiterbahnen wird eine gleichmäßige Übertragung sichergestellt. Da diese Leitungen hochfrequente Signale führen, ist eine genaue Anpassung notwendig.




Um Einkopplungen auf die Pfade für hochfrequente Signale zu vermeiden wurde das für den Transceiver benötigte Quarz möglichst weit vom Sende- bzw. von den Empfangsanschlüssen des TDA angeordnet. Aus diesem Grund wurde der für das für den Oszillator benötigte Quarz mit einer Frequenz $f_{Crystal}=21,948717$ MHz zwischen dem \ac{IC} und vorgesehenen Stiftleiste platziert.  Die Frequenz des benötigten Quarzes ergibt sich aus dem  Zusammenhang
\begin{equation}\label{eq:fsys}
f_{Crystal} = f_{IF2} * 80 = \frac{f_{IF1}}{39} * 80  = \frac{10,7 Mhz}{39} * 80 = 21,948717 MHz
\end{equation}
wobei die Zwischenfrequenz der ersten Stufe durch die internen funktionalen Blöcke des TDA und den Keramikfilter vorgegeben ist. Die weiteren Faktoren ergeben sich aus dem Aufbau des Empfängers und werden von Infineon bereitgestellt\cite{TDA-UserManual}.


\subsection{XMC4500}
Die Hauptsteuerung der Basisstation übernimmt ein Mikrocontroller der Bauart XMC4500, welcher aus der Mikrocontroller-Familie XMC4000 von Infineon stammt. Diese Baureihe stellt energieeffiziente \acp{IC} bereit welche für industrielle Steuerungen und \enquote{Sense \& Control} optimiert sind. 
Der XMC4500 basiert auf einem Kern Cortex\textsuperscript{TM}-M4 des britischen Herstellers ARM\textsuperscript{TM}. Daneben ist der Mikrocontroller auf die von Infineon selbst entwickelte Entwicklungsumgebung DAVE\textsuperscript{TM} angepasst.
Im speziellen Anwendungsfall kommt die Variante des XMC mit 144 Pins und einem Flash-Speicher von 1024 Kilobit zum Einsatz. Der Chip ist dabei in ein  \ac{LQFP}-Gehäuse verbaut. Durch die Wahl diese Gehäuses konnte die elektrische Verbindung mit der Platine relativ leicht durch löten erreicht werden. Im Gegensatz zum ebenfalls erhältlichen \ac{BGA}-Gehäuse des XMC sind in diesem alle Kontakte direkt erreichbar und können verlötet werden.


%PP2 an INterrupeingang
Zur Verteilung der entstehenden Abwärme wurde auch in diesem Bereich der Platine  frei gebliebener Abschnitte zwischen den Leiterbahnen mit geerdeten Kupferflächen gefüllt. Durch teilweise auch mehrfache Durchkontaktierungen wurde sowohl eine saubere Kontaktierung der Flächen durchgeführt um Flächen schwimmenden Potentials zu vermeiden. Durch die Vias wurde aber auch die thermische Leitfähigkeit zwischen den beiden Kupferlagen erhöht und somit die Abgabe entstehender Wärme von den Bauteilen verbessert. Beim verwendeten \ac{LQFP}-Gehäuse des XMC4500 liegt die Rückseite des Halbleiters offen und ist nicht im Gehäuse verschlossen. Im Bereich unter der offenliegenden Rückseite des Chips ist deswegen zur Wärmeableitung ein Feld von 6x6 Vias vorgesehen. Dieser Aufbau dient dazu die Temperatur des Chips (junction temperature) auf den maximal erlaubten Wert $T_J = 150^\circ C$ zu beschränken.%Rechnung mit Therm wiederst. ??

%Quarz (dämpfungswiderstand)
%Für mögliche spätere Anwendungsfälle wurde außerdem ein Quarz für die Realtime-Clock des XMC4500 vorgesehen

%Reset taster
%LEDs
Um die Ausgabe von aktuellen Systemzuständen zu ermöglichen wurden sieben Status-LEDs an freien Ausgänge des XMC4500  angeschlossen. Diese ermöglichten in active-low Ansteuerung eine Anzeige verschiedener im Mikrocontroller ablaufender Prozesse. Für vier der verwendeten Leuchtdioden wurde grün als Farbe gewählt, für die drei weiteren rot. Zur Vereinfachung eines Resets der Hardware wurde ein entsprechender Taster vorgesehen, mit dem der entsprechenden  $\overline{\textbf{PORST}}$-Pin des Mikrocontroller auf das 0V Potential gezogen wird und somit die Hardware zurückgesetzt wird.
Die Programmierung des Mikrocontrollers erfolgt über das \ac{JTAG}-Interface über welches auch das debuggen möglich ist. Der XMC4500 stellt dafür ein \ac{JTAG}-Modul bereit welches mit der in IEEE1149.1 festgelegten Standarts übereinstimmt. Verwendet wird hierfür die achpolige Variante des Debug-Steckers bei dem der Platine vom \ac{JTAG}-Adapter Versorgungsspannung und Masse sowie Signale für Reset, Systemtakt und die Steuerleitung übergeben wird.  %enquote xmc DAtenblatt , nur zwei angeschlossen?

%Abblockkondensatoren

Für die Kommunikation des Mikrocontroller mit einem Computer wird die im XMC  bereitgestellte Peripherie genutzt. Zur Verbindung mit einem anderen Gerät wurde deshalb eine kombinierte Micro-USB-Buchse verwendet welche sowohl für Typ A oder Typ B Stecker geeignet ist.
Um sowohl den Mikrocontroller als auch einen an die Basisstation angeschlossenen Computer gegen Fehlerströme über die USB-Leitung zu schützen wurden die Datenleitungen mit so genannten \ac{TVS}-Dioden , welche gegen Masse geklemmt sind geschützt. Sowohl positive als auch negative Spannungsspitzen werden dadurch gegen Masse kurzgeschlossen, was zum Schutz des XMC bzw. des angeschlossenen Computer führt. Um eine Verpolung bei Stromversorgung über die USB-Buchse, und somit eine Zerstörung, zu vermeiden wurde eine Schottky-Diode im Strompfad zum Spannungsregler vorgesehen. Diese soll einen Stromfluss im Verpolungsfall unterbinden. Da der Mikrocontroller für die Kommunikation über das USB-Interface die aktuelle Busspannung auf der USB-Leitung benötigt, muss der extra dafür vorgesehene Pin des XMC direkt und ohne schützende Schottky-Diode mit der 5V Leitung der USB-Buchse verbunden werden.


\subsection{Ethernet}
Die Ethernetschnittstelle der Basisstation basiert auf dem RelaxKit von Infineon. Genau wie im Evaluations Board des Herstellers Infineon wurde der Ethernet-Controller KSZ8031RNL von Mircel Inc. verwendet. Dieser stellt alle wichtigen Peripherien selbst zur Verfügung und muss somit nur noch durch ein Quarz und diverse Kapazitäten und Induktivitäten an den Versorgungsleitungen ergänzt werden. Da die im Controller verbaute Stufe zur Interruptgenerierung nur über einen schwachen Pull-Up Widerstand verfügt, musste ein externer Widerstand von $1k\Omega$ verbaut werden. Am Reset-Eingang wurde ebenfalls ein Pull-Up Widerstand verbaut. Dieser wurde um zwei Dioden sowie einen Kondensator zu der im Datenblatt empfohlenen Verschaltung erweitert. So kann sichergestellt werden, das sowohl beim Anlegen einer Spannung an das Gesamtsystem, als auch bei einem Reset des Ethernetbausteins durch den steuernden Mikrocontroller alle Spannungen im sicheren Bereich liegen und die Funktion gewähleistet ist. Die dreizehn zum XMC4500 notwendigen Verbindungen wurden zur besseren Übersicht im Schaltplan in einem Signal-Kabelbaum zusammengefasst. Wegen der Gefahr von Rissen in Lötstellen wurde im Bereich um den Netzwerkstecker die Anordnung von Bauteilen vermieden. 
Da der KSZ8031RNL  nicht lieferbar war und die anfallende Datenmenge nur von geringem Umfang ist, wurde der Controller und die entsprechende Netzwerkbuchse von Würth Electronics zunächst nicht bestückt. Somit wurde eine Verwendung des Ethernet-Controllers auch in der Software des XMC-Mikrocontroller nicht umgesetzt. Da jedoch ein entsprechendes Softwareprojekt für das RelaxKit von Infineon zur Verfügung gestellt wird %(TODO wird es das auch wirklich + webseite zitieren), wäre eine Netzwerkkommunikation vermutlich mit wenigen Anpassungen leicht umzusetzen. 









\subsection{Spannungsversorgung}
Die Bereitstellung der notwendigen Spannung sollte wahlweise über den zur Datenerfassung angeschlossenen Computer oder über ein externes Netzteil erfolgen. Zum Anschluss eines externen Netzteils wurden Lötanschlüsse für eine Steckerleiste im Rastermaß $2,54$mm vorgesehen. Genau wie bei der Stromversorgung über die USB-Buchse wurde auch hier eine Schottky-Diode zum Verpolungsschutz der Schaltung integriert. Ausgelegt ist die Basisstation für ein Gleichspannungsnetzteil mit $5$V Ausgangsspannung, durch den Aufbau mit den beiden verwendeten Schottky-Dioden und die mögliche Eingangsspannung des nachfolgenden Reglers wäre jedoch eine angeschlossene $6$V-Stromquelle (bei vernachlässigtem Spannungsabfall an der Diode) unproblematisch.
Wegen der bereits erwähnten notwenigen Versorungspannung von $3,3$V für den XMC4500 und die Transceiver wurde diese mit einem \ac{LDO}-Regler angepasst. Dieser verwendete Spannungsregler der Bauart MCP1826S von Microchip Technology Inc. sollte die Eingangspannung auf das gewünschte Niveau herunter regeln.
Als Gehäusetyp wurde das dreibeinige \ac{SOT}-Package gewählt, da keine Variante des \ac{LDO} mit einstellbarer Ausgangsspannung und somit keine Variante des \acp{IC} mit mehr Anschlusspins benötigt wurde. Statt des \ac{LDO} von Microchip war zunächst ein gleichwertiger Spannungsregler von Infineon, der IFX1117MEV33, vorgesehen. Die beiden \acp{LDO} unterscheiden sich in der elektrischen Belegung der Kühlfahne des \ac{SOT}-223 beim Spannungsregler von Infineon ist diese mit dem $3,3$V Output kontaktiert, beim verwendeten \ac{LDO} mit Ground. Da es sich bei dem Spannungsregler um ein \ac{SMD}-Bauteil handelt ist die verwendung von Kühlkörpern schwer möglich. Die Abführung der im Spannungsregler erzeugten Verlustwärme erfolgt deshalb üblicherweise über das Anlöten der Kühlfahne an eine Kupferfläche. So wird die erzeugte Wärme gespreizt und kann gut an die Umgebung abgegeben werden. Bei Verwendung des zuerst eingeplanten IFX1117MEV33 wäre somit eine Kupferfläche auf $3,3$V Potential zum Kühlen notwendig, welche elektrisch isoliert sein müsste. Wegen des XMC4500 und den anderen Bauteilen wäre somit nur eine Kupferfläche mit Abmessungen von etwa $15$mm auf $16$mm möglich, da die elektrischen Verbindungen bestehender Bauteile des Bereiches nicht unterbrochen werden sollten. Durch die Verwendung des entsprechenden Bauteils von Microchip konnte auf eine abgetrennte Kupferinsel verzichtet werden und somit die bereits erwähnte GND-Kupferfläche um den Mikrocontroller als gemeinsame Masse- und Kühlfäche verwendet werden.%"GND" lasssen?
Wegen der vorderseitigen Bauteilbestückung war die verfügbare Kupferfläche auf der Platinenrückseite  größer. Um dies beim Ableiten der Wärme vom Bauteil zu nutzen wurden vor allem im Bereich um die Kühlfinne des \ac{SOT}-223 Gehäuses Durchkontaktierungen angebracht. Diese parallelen \enquote{Thermal Vias} konnten als Wärmepfad zur unteren Kupferfläche dienen. Außerdem wurde der \ac{JTAG}-Stecker des XMC absichtlich im Bereich neben dem Spannungsregler angebracht. Durch die große Oberfläche stellt auch dieser eine gute Wärmesenke dar. %sicher?
% Rechnung Thermischer widerstand

\section{Generierte Dokumente}
Altium Designer kann aus den erstellten \ac{PCB}-Daten die für die weitere Verarbeitung benötigten Dateien generieren. Im dazu vorgesehene Output-Job-Manager können entsprechende Outputs gewählt werden und einem Output-Container zugeordnet werden. Dies ist vor allem zum Erstellen gewünschter Dateistrukturen bei größeren Projekten notwendig um dies übersichtlich zu halten. Im der vorliegenden Arbeit wurde dies jedoch nur bedingt benötigt.
Für die Bestückung der Basisstation wurde zunächst eine \enquote{Bill of materials} also eine Materialliste exportiert mit deren Hilfe die entsprechenden Bestellnummern des Lieferanten Digi-Key herausgesucht und sortiert werden konnten. Mithilfe der ebenfalls generierten \enquote{Assembly Drawings} war Ausgabe aller Bauteile und deren Platzierung auf der Platine möglich. Ebenfalls wurden in diesem Menü die strukturierten Schaltpläne ausgegeben.
Zur dreidimensionalen Visualisierung wurde die fertige Platine mit den in den Footprints enthaltenen Bauteilabmessungen und Formen als 3D-Modell im \ac{STEP}-Format ausgegeben. Mithilfe des \ac{CAD}-Programms \enquote{SolidWorks} wurde daraus ein Gehäuse mit Deckel für die Basisstation erstellt. Diese wurde anschließend mit einem 3D-Drucker ausgedruckt und dient dazu die Platine zu schützen.
Die Fertig der Platine durch den Hersteller erfolgte durch erstellte Gerber Daten, die ebenfals aus dem Output-Job-Manager generiert werden. Dabei wird für jedes Layer des \ac{PCB}-Editors eine Gerberdatei erstellt in der die Geometrie der entsprechenden Lage angegeben ist. Jede Lage entspricht in der Herstellung dabei einem Fertigungsschritt. Um Bohrungen in der Platine zu setzen werden zusätzliche \enquote{NC Drill-Files} also Daten für die \ac{NC} der automatischen Maschinen zum setzen von Bohrungen. Diese enthalten den Bohrdurchmesser, die Art der Bohrung sowie den Ort auf der Platine und müssen zusätzlich aus Altium Designer exportiert werden.