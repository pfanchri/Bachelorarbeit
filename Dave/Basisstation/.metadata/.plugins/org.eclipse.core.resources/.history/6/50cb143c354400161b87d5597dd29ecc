/*
 * COMtransfer.c
 *
 *  Created on: Jul 7, 2016
 *      Author: student06
 */
#include "Header_general.h" //including all Header files


uint8_t COM_transfer_started = 0;

void wait_for_COM(void) {
	if (COM_transfer_started == 1) {
		return;
	}
	uint16_t receivedBytes = 0;
	while (1) {
		receivedBytes = CDC_Device_BytesReceived(&VirtualSerial_CDC_Interface);
		CDC_Device_SendData(&VirtualSerial_CDC_Interface, "Press any Key to Start COM-Transfer\n", 19);
		CDC_Device_USBTask(&VirtualSerial_CDC_Interface);
		delay(400000);

		if (receivedBytes != 0) {
			COM_transfer_started = 1
			return;
		}
	}

